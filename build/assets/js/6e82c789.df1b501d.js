"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2265],{4137:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),h=i,m=d["".concat(s,".").concat(h)]||d[h]||u[h]||a;return n?o.createElement(m,r(r({ref:t},c),{},{components:n})):o.createElement(m,r({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:i,r[1]=l;for(var p=2;p<a;p++)r[p]=n[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},720:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var o=n(7462),i=(n(7294),n(4137));const a={sidebar_order:2,slug:"/security-center/setting/website-setup-drupal8-9-10"},r="Website Monitoring Setup (drupal 8,9,10^)",l={unversionedId:"orion monitor/security centre/settings/website setup - drupal 8 9 10",id:"orion monitor/security centre/settings/website setup - drupal 8 9 10",title:"Website Monitoring Setup (drupal 8,9,10^)",description:'The reason for segregating a different tutorial for setting up Orion Module for "drupal 8,9,10" site is because it uses the most recent updated modules, and is often composer managed, for that matter, we can download the extension\'s file using the composer package manager, and the remainder of the installation process will be the exact same as that of "drupal 7"',source:"@site/docs/3 - orion monitor/3 - security centre/3 - settings/2 - website setup - drupal 8 9 10.md",sourceDirName:"3 - orion monitor/3 - security centre/3 - settings",slug:"/security-center/setting/website-setup-drupal8-9-10",permalink:"/Documentation-Orion/security-center/setting/website-setup-drupal8-9-10",draft:!1,editUrl:"https://github.com/OPC-IT/Documentation-Orion/tree/main/docs/3 - orion monitor/3 - security centre/3 - settings/2 - website setup - drupal 8 9 10.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_order:2,slug:"/security-center/setting/website-setup-drupal8-9-10"},sidebar:"defaultSidebar",previous:{title:"Website Monitoring Setup (drupal 7^)",permalink:"/Documentation-Orion/security-center/setting/website-setup-drupal7"},next:{title:"Website Monitoring Setup (alternative method for developers)",permalink:"/Documentation-Orion/security-center/setting/website-setup-developer"}},s={},p=[{value:"Pre-check for composer",id:"pre-check-for-composer",level:3},{value:"Installing Dependency Module",id:"installing-dependency-module",level:3},{value:"Configuring the Extension / Orion Setting",id:"configuring-the-extension--orion-setting",level:3},{value:"Exporting Configuration &quot;orion.settings.yml&quot;",id:"exporting-configuration-orionsettingsyml",level:3}],c={toc:p},d="wrapper";function u(e){let{components:t,...a}=e;return(0,i.kt)(d,(0,o.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"website-monitoring-setup-drupal-8910"},"Website Monitoring Setup (drupal 8,9,10^)"),(0,i.kt)("p",null,'The reason for segregating a different tutorial for setting up Orion Module for "',(0,i.kt)("inlineCode",{parentName:"p"},"drupal 8,9,10"),'" site is because it uses the most recent updated modules, and is often composer managed, for that matter, we can download the extension\'s file using the composer package manager, and the remainder of the installation process will be the exact same as that of "',(0,i.kt)("inlineCode",{parentName:"p"},"drupal 7"),'"'),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},'Except for "Installing Dependency Module", the remainder steps "Configuring the Extension / Orion Setting" and "Exporting Configuration" will be identical to  "drupal 7" site.')),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"pre-check-for-composer"},"Pre-check for composer"),(0,i.kt)("p",null,'Before you proceeding to the following tutorial, you will have to make sure your website\'s drupal module is manged via composer. To do that you will need to login to you "CPanel" then proceed to "File Manager" and check if the file "',(0,i.kt)("inlineCode",{parentName:"p"},"composer.json"),'" and "',(0,i.kt)("inlineCode",{parentName:"p"},"composer.lock"),'" exists in the ',(0,i.kt)("inlineCode",{parentName:"p"},"public_html")," folder."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 15_06_26 -  [Google Chrome-cPanel - Tools] -",src:n(250).Z,width:"1470",height:"603"})),(0,i.kt)("admonition",{type:"warning"},(0,i.kt)("p",{parentName:"admonition"},'If the website is not managed by "composer" then you may use the manual installation process, similar to that of the "installation for druapl 7.0" (i.e. downloading the module manually and put that in "',(0,i.kt)("inlineCode",{parentName:"p"},"public_html/module/custom/..."),'")')),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"installing-dependency-module"},"Installing Dependency Module"),(0,i.kt)("p",null,'In order to add the website to the Orion Monitor, you will first need to install the two dependent modules: \u201cVitals\u201d and "Health Check" that will provide the necessary endpoint for Orion module. The following steps will guide you through installing them using composer.'),(0,i.kt)("p",null,"First find the relevant command for the most recent compatible version modules:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.drupal.org/project/vitals"},"Drupal Custom Module - Vital")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.drupal.org/project/health_check"},"Drupal Custom Module - Health Check"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 16_17_12 -  [Typora-1 - Installation drupal 8910.md] -",src:n(350).Z,width:"2526",height:"1300"})),(0,i.kt)("p",null,"Secondly, you will need to open the terminal in your target website and install the modules with your previously copied commands (here we will use ",(0,i.kt)("inlineCode",{parentName:"p"},"composer require 'drupal/health_check:^3.0'")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"composer require 'drupal/vitals:^2.3'")," as an example), this will download the relevant files for these modules, and put them into the proper directory ",(0,i.kt)("inlineCode",{parentName:"p"},"/public_html/module/custom"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 15_16_28 -  [Google Chrome-cPanel - Tools] -",src:n(9169).Z,width:"1116",height:"648"})),(0,i.kt)("admonition",{type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"Noting that this will not update the database, the drupal site will not have these two modules enabeld, you will guided to do it slightly later.")),(0,i.kt)("p",null,"Thirdly, to enable the module in the drupal backend, you will need to proceed to the website's extend tab, like the following shown:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 15_19_24 -  [Google Chrome-Extend  OPC] -",src:n(5461).Z,width:"1098",height:"919"})),(0,i.kt)("p",null,"Lastly, in CPanel again, you will need to ensure that your ",(0,i.kt)("inlineCode",{parentName:"p"},"/public_html/.htaccess")," contains the two lines (anywhere in the file), then make a full cache clearing via the backend."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"...\nCacheDisable public /\nCacheDisable private /\n...\n")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 15_20_58 -  [Google Chrome-cPanel - Tools] -",src:n(8836).Z,width:"1298",height:"1658"})),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 15_24_43 -  [Google Chrome-Extend  OPC] -",src:n(2175).Z,width:"413",height:"335"})),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"configuring-the-extension--orion-setting"},"Configuring the Extension / Orion Setting"),(0,i.kt)("p",null,"The previous steps will install the required module for the targeted website, in this section we will go through retriving the authentication token from the website, and configure the Orion Monitor. After configuration Orion Monitor will be able to access the website health status, php version, and out-dated modules via that token."),(0,i.kt)("p",null,'First, you will copy the authentication token from the "vital configuration" panel, for instance the site you want to monitor is "',(0,i.kt)("a",{parentName:"p",href:"http://www.example.com%22"},'www.example.com"'),' then you login the drupal backend via "',(0,i.kt)("a",{parentName:"p",href:"http://www.example.com/user%22"},'www.example.com/user"'),' and then visit "',(0,i.kt)("a",{parentName:"p",href:"http://www.example.com/admin/config/services/vitals%22"},'www.example.com/admin/config/services/vitals"'),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 15_30_19 -  [Google Chrome-Extend  OPC] -",src:n(9006).Z,width:"697",height:"977"})),(0,i.kt)("p",null,"Second, you will need to configure the Orion Monitor, entering the website's name, Url, and the token we just copied, noting that the Url and token is crucial configuration, they has to be exact match with the target website."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 15_39_54 -  [CleanShot-CleanShot] -",src:n(1257).Z,width:"1079",height:"902"})),(0,i.kt)("p",null,'Lastly check to see your site monitoring on active by visiting "',(0,i.kt)("a",{parentName:"p",href:"https://opc.com.au/orion/security"},"https://opc.com.au/orion/security"),'", you should be able to see an addition entry of your site active, and the timestamp refreshing, if the timestamp is not refresh, there is a issue connecting to the target site.'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 15_45_28 -  [Google Chrome-Installation (drupal 8910^)  Orion] -",src:n(660).Z,width:"732",height:"122"})),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"exporting-configuration-orionsettingsyml"},'Exporting Configuration "orion.settings.yml"'),(0,i.kt)("p",null,'The previous step of "changing orion setting" will make a modifification to the "configuration" of drupal site where the Orion Monitor is sitting on (aka the "',(0,i.kt)("a",{parentName:"p",href:"http://opc.com.au/"},"opc.com.au"),'" site), consequently, there will be a mismatch between the producation filebase and the development firebase. More specifically, the file ',(0,i.kt)("inlineCode",{parentName:"p"},"config/sync/orion.settings.yml")," will be different on ",(0,i.kt)("inlineCode",{parentName:"p"},"main"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"stage"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"production")," branch, and if nothing is done, then at the next feature change, the new changes to this file will be overriden by old version."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"To avoid that we will need to synchronize the changes to that ",(0,i.kt)("inlineCode",{parentName:"p"},"config/sync/orion.settings.yml")," file to all the branches we have.")),(0,i.kt)("p",null,"First, copy the changes we just made via the drupal backend"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image-20230608155431910",src:n(6839).Z,width:"944",height:"1775"})),(0,i.kt)("p",null,"Then paste the changes to your ",(0,i.kt)("inlineCode",{parentName:"p"},"main")," branch, and perform branch merging like you would usually do in development, aka, merging ",(0,i.kt)("inlineCode",{parentName:"p"},"main")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"stage"),", then merging ",(0,i.kt)("inlineCode",{parentName:"p"},"stage")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"prod"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 15_56_52 -  [Google Chrome-OPC eBusiness  OPC Website \xb7 GitLab] -",src:n(4189).Z,width:"1299",height:"2108"})),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"2023.06.08 - 16_00_03 -  [Google Chrome-branch merging main stage prod - Google Search] -",src:n(5701).Z,width:"695",height:"417"})))}u.isMDXComponent=!0},350:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2-77339d5d96ecc319052ca662599cab22.jpg"},250:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2023.06.08 - 15_06_26 -  [Google Chrome-cPanel - Tools] --7da3f8154819106478931e3514594fc1.jpg"},9169:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2023.06.08 - 15_16_28 -  [Google Chrome-cPanel - Tools] --892457a94b2f9a5dcc098d400c55bc17.jpg"},5461:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2023.06.08 - 15_19_24 -  [Google Chrome-Extend  OPC] --fb805f89202485de58277027898dd7d7.jpg"},8836:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2023.06.08 - 15_20_58 -  [Google Chrome-cPanel - Tools] --91c789098b255ff560e9c0ff9ed8b01f.jpg"},2175:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2023.06.08 - 15_24_43 -  [Google Chrome-Extend  OPC] --471629625add428d1eee6522f443f327.jpg"},9006:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2023.06.08 - 15_30_19 -  [Google Chrome-Extend  OPC] --a0cbbe315dddb7dade5eb39e8a8f81cd.jpg"},1257:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2023.06.08 - 15_39_54 -  [CleanShot-CleanShot] --b87a3305a7880d8c7dcaeb4da32c013b.png"},660:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2023.06.08 - 15_45_28 -  [Google Chrome-Installation (drupal 8910^)  Orion] --309d9c44320c6e8394431f92588ff1d8.jpg"},4189:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2023.06.08 - 15_56_52 -  [Google Chrome-OPC eBusiness  OPC Website \xb7 GitLab] --187059926e92f3738c26d1a7b2683fcc.jpg"},5701:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/2023.06.08 - 16_00_03 -  [Google Chrome-branch merging main stage prod - Google Search] --8e241e2ae83326ebf2684257d48eb0ba.jpg"},6839:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/image-20230608155431910-b1e30d7a9a22fe7e3453f44721b07952.png"}}]);